/* NotebookLM Assistant v3.0 — Popup Styles
 * Light theme = NotebookLM design. Dark theme = deep blue-purple.
 * Google Sans + Material Symbols Outlined.
 */

/* Icons loaded from icons.css (inline SVG sprites) */

/* ─── Reset ─── */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

/* ─── Root / Light Theme Variables ─── */
:root {
  --bg: #f8f9fa;
  --bg-card: #ffffff;
  --bg-hover: #f0f4ff;
  --bg-input: #ffffff;
  --text: #1f1f1f;
  --text-secondary: #5f6368;
  --text-muted: #80868b;
  --border: #dadce0;
  --border-light: #e8eaed;
  --accent: #4285f4;
  --accent-hover: #3367d6;
  --accent2: #7b61ff;
  --accent2-hover: #6344e0;
  --danger: #ea4335;
  --danger-hover: #d33426;
  --success: #34a853;
  --success-bg: #e6f4ea;
  --error-bg: #fce8e6;
  --info-bg: #e8f0fe;
  --warning: #f9ab00;
  --warning-bg: #fef7e0;
  --shadow: 0 1px 3px rgba(0,0,0,.08);
  --shadow-lg: 0 4px 16px rgba(0,0,0,.12);
  --radius: 16px;
  --radius-sm: 12px;
  --radius-pill: 999px;
  --transition: 200ms ease;
}

/* ─── Dark Theme ─── */
[data-theme="dark"] {
  --bg: #1a1a2e;
  --bg-card: #1e1e3a;
  --bg-hover: #252548;
  --bg-input: #222240;
  --text: #e8eaed;
  --text-secondary: #9aa0a6;
  --text-muted: #6b7280;
  --border: #2a2a4a;
  --border-light: #333360;
  --accent: #8ab4f8;
  --accent-hover: #6da1f0;
  --accent2: #a78bfa;
  --accent2-hover: #8b6ce0;
  --danger: #f28b82;
  --danger-hover: #e06b60;
  --success: #81c995;
  --success-bg: #1b3a2a;
  --error-bg: #3a1e1e;
  --info-bg: #1e2a3a;
  --warning: #fdd663;
  --warning-bg: #3a351e;
  --shadow: 0 1px 3px rgba(0,0,0,.24);
  --shadow-lg: 0 4px 16px rgba(0,0,0,.32);
}

/* ─── Base ─── */
html {
  width: 380px;
  min-height: 520px;
  border-radius: var(--radius);
  overflow: hidden;
}
body {
  width: 380px;
  min-height: 520px;
  font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, system-ui, sans-serif;
  font-size: 13px;
  line-height: 1.4;
  color: var(--text);
  background: var(--bg);
  border-radius: var(--radius);
  overflow-x: hidden;
  overflow-y: auto;
  transition: background var(--transition), color var(--transition);
}
.app {
  padding: 0 0 12px;
  border-radius: var(--radius);
}

/* .ms icon styles are in icons.css */

/* ─── Header ─── */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: var(--bg-card);
  border-bottom: 1px solid var(--border-light);
}
.header-left {
  display: flex;
  align-items: center;
  gap: 8px;
}
.logo { flex-shrink: 0; border-radius: 6px; }
.header-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--text);
}
/* Theme controlled from Settings tab only */

/* ─── Tabs ─── */
.tabs {
  display: flex;
  background: var(--bg-card);
  border-bottom: 1px solid var(--border-light);
  overflow-x: auto;
  scrollbar-width: none;
}
.tabs::-webkit-scrollbar { display: none; }
.tab {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 8px 4px 6px;
  border: none;
  background: none;
  color: var(--text-muted);
  font-family: inherit;
  font-size: 10px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition);
  border-bottom: 2px solid transparent;
  white-space: nowrap;
}
.tab:hover { color: var(--text-secondary); background: var(--bg-hover); }
.tab.active {
  color: var(--accent);
  border-bottom-color: var(--accent);
}
.tab .ms { font-size: 20px; }

/* ─── Panels ─── */
.panel { display: none; padding: 12px 16px; }
.panel.active { display: block; }

/* ─── Card ─── */
.card {
  background: var(--bg-card);
  border: 1px solid var(--border-light);
  border-radius: var(--radius);
  padding: 14px;
  margin-bottom: 10px;
  transition: background var(--transition), border-color var(--transition);
}
.card h3 {
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.card h3 .ms { color: var(--accent); }

/* ─── Form elements ─── */
.field { margin-bottom: 10px; }
.field label {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  margin-bottom: 4px;
}
.field label .ms { font-size: 16px; }

.row {
  display: flex;
  gap: 8px;
  align-items: center;
}
.flex-1 { flex: 1; }

.select, .input, .textarea {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg-input);
  color: var(--text);
  font-family: inherit;
  font-size: 13px;
  transition: border-color var(--transition);
  outline: none;
}
.select:focus, .input:focus, .textarea:focus {
  border-color: var(--accent);
}
.select-sm { max-width: 160px; }
.input-sm { max-width: 100px; }
.field-sm { display: flex; align-items: center; gap: 6px; }
.field-sm label { margin: 0; white-space: nowrap; }

.textarea {
  resize: vertical;
  min-height: 60px;
  margin-top: 8px;
}

/* ─── Buttons ─── */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  padding: 8px 14px;
  border: 1px solid var(--border);
  border-radius: var(--radius-pill);
  background: var(--bg-card);
  color: var(--text);
  font-family: inherit;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition);
  line-height: 1;
  white-space: nowrap;
}
.btn:hover { background: var(--bg-hover); }
.btn:disabled { opacity: .5; cursor: not-allowed; }
.btn .ms { font-size: 16px; }

.btn-primary {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}
.btn-primary:hover { background: var(--accent-hover); }

.btn-accent {
  background: var(--accent2);
  color: #fff;
  border-color: var(--accent2);
}
.btn-accent:hover { background: var(--accent2-hover); }

.btn-danger {
  background: var(--danger);
  color: #fff;
  border-color: var(--danger);
}
.btn-danger:hover { background: var(--danger-hover); }

.btn-full { width: 100%; margin-bottom: 8px; }
.btn-sm { padding: 5px 10px; font-size: 12px; }
.btn-sm .ms { font-size: 14px; }
.btn-icon { padding: 6px; border-radius: 50%; min-width: 32px; }

/* ─── Actions grid ─── */
.actions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-bottom: 10px;
}
.actions .btn-full { margin-bottom: 0; }

/* ─── Collapsible ─── */
.collapsible {
  margin-bottom: 10px;
}
.collapsible summary {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 0;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  list-style: none;
}
.collapsible summary::-webkit-details-marker { display: none; }
.collapsible summary::before {
  content: '';
  display: inline-block;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 6px solid var(--text-secondary);
  transition: transform var(--transition);
  margin-right: 2px;
}
.collapsible[open] summary::before { transform: rotate(180deg); }

/* ─── Divider ─── */
.divider {
  border: none;
  border-top: 1px solid var(--border-light);
  margin: 10px 0;
}

/* ─── Checkbox label ─── */
.checkbox-label {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  font-size: 13px;
  cursor: pointer;
}
.checkbox-label input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: var(--accent);
}

/* ─── Status messages ─── */
.status {
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  font-size: 12px;
  margin-top: 8px;
  display: none;
  align-items: center;
  gap: 6px;
}
.status.show { display: flex; }
.status.success { background: var(--success-bg); color: var(--success); }
.status.error { background: var(--error-bg); color: var(--danger); }
.status.info { background: var(--info-bg); color: var(--accent); }
.status.warning { background: var(--warning-bg); color: var(--warning); }

/* ─── Badge ─── */
.badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 22px;
  height: 22px;
  padding: 0 6px;
  border-radius: var(--radius-pill);
  background: var(--accent);
  color: #fff;
  font-size: 11px;
  font-weight: 600;
}

/* ─── Progress ─── */
.progress-area {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  flex-wrap: wrap;
}
.progress-bar {
  flex: 1;
  height: 6px;
  background: var(--border-light);
  border-radius: 3px;
  overflow: hidden;
  min-width: 100px;
}
.progress-fill {
  height: 100%;
  background: var(--accent);
  border-radius: 3px;
  transition: width 300ms ease;
  width: 0%;
}
.progress-text {
  font-size: 11px;
  color: var(--text-secondary);
  white-space: nowrap;
}

/* ─── Results list (RSS, links, YT) ─── */
.results-list {
  max-height: 200px;
  overflow-y: auto;
  margin-top: 8px;
}
.results-list:empty { display: none; }
.result-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border: 1px solid var(--border-light);
  border-radius: 8px;
  margin-bottom: 4px;
  font-size: 12px;
  transition: background var(--transition);
}
.result-item:hover { background: var(--bg-hover); }
.result-item input[type="checkbox"] {
  width: 14px; height: 14px; accent-color: var(--accent);
}
.result-item .title { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.result-item .url { font-size: 10px; color: var(--text-muted); max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* ─── Queue list ─── */
.queue-list { max-height: 240px; overflow-y: auto; }
.queue-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  border: 1px solid var(--border-light);
  border-radius: 8px;
  margin-bottom: 4px;
  font-size: 12px;
}
.queue-item .title { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.queue-item .remove {
  background: none; border: none; cursor: pointer;
  color: var(--text-muted); font-size: 18px;
  font-weight: bold; line-height: 1;
}
.queue-item .remove:hover { color: var(--danger); }

/* ─── Sources list ─── */
.sources-list { max-height: 240px; overflow-y: auto; }
.source-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  border: 1px solid var(--border-light);
  border-radius: 8px;
  margin-bottom: 4px;
  font-size: 12px;
  transition: background var(--transition);
}
.source-item:hover { background: var(--bg-hover); }
.source-item input[type="checkbox"] {
  width: 14px; height: 14px; accent-color: var(--accent); flex-shrink: 0;
}
.source-item .icon { font-size: 14px; color: var(--accent); }
.source-item .title { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.source-item .type {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: var(--radius-pill);
  background: var(--bg-hover);
  color: var(--text-secondary);
  white-space: nowrap;
}
.source-item .sync-badge {
  font-size: 10px;
  color: var(--success);
}

/* ─── History list ─── */
.history-list { max-height: 300px; overflow-y: auto; margin-top: 8px; }
.history-item {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 8px;
  border-bottom: 1px solid var(--border-light);
  font-size: 12px;
}
.history-item .icon { font-size: 16px; flex-shrink: 0; margin-top: 1px; }
.history-item .icon.add { color: var(--success); }
.history-item .icon.delete { color: var(--danger); }
.history-item .icon.error { color: var(--danger); }
.history-item .details { flex: 1; }
.history-item .time { font-size: 10px; color: var(--text-muted); white-space: nowrap; }

/* ─── Info box (YouTube video info) ─── */
.info-box {
  padding: 8px 10px;
  background: var(--info-bg);
  border-radius: 8px;
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

/* ─── Scrollbar ─── */
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

/* ─── Utilities ─── */
.hidden { display: none !important; }
.text-center { text-align: center; }
.text-muted { color: var(--text-muted); }
.mt-8 { margin-top: 8px; }
.mb-8 { margin-bottom: 8px; }